{"version":3,"file":"\\packages\\handlebar-helpers:tests.js","sources":["handlebar-helpers/helpers_tests.html","handlebar-helpers/helpers_tests.js"],"names":[],"mappings":";;;;;;;;AAAA,8F;AACA,gI;AACA,+I;AACA,qI;AACA,uI;AACA,uJ;AACA,wI;AACA,yI;AACA,qL;AACA,qI;AACA,kI;AACA,uJ;AACA,kK;AACA,wK;;;;;;;;;;;;;;;;;;;ACbA,4E;;AAEA,c;AACA,8E;AACA,sD;AACA,qE;AACA,I;;AAEA,2E;AACA,6G;AACA,mH;AACA,yH;AACA,I;;AAEA,0E;AACA,iC;AACA,sE;AACA,kH;AACA,qC;AACA,iB;AACA,sF;AACA,4B;AACA,iB;AACA,kF;AACA,kB;AACA,I;;AAEA,+E;AACA,4B;AACA,iC;AACA,sE;AACA,0C;AACA,mC;AACA,iB;AACA,yC;AACA,4B;AACA,iB;AACA,0C;AACA,kB;AACA,I;;AAEA,gF;AACA,4B;AACA,iC;AACA,sE;AACA,uE;AACA,uE;AACA,0C;AACA,E;AACA,yB;AACA,iB;AACA,yC;AACA,2C;AACA,2C;;AAEA,4B;AACA,iB;AACA,0C;AACA,kB;AACA,mB;AACA,mB;;AAEA,I;;AAEA,mE;AACA,8E;AACA,kB;AACA,4B;AACA,iC;AACA,sE;AACA,4C;AACA,uC;AACA,iB;AACA,kH;AACA,4B;AACA,iB;AACA,0C;AACA,kB;AACA,I;;AAEA,mE;AACA,gF;AACA,kB;AACA,4B;AACA,iC;AACA,sE;AACA,gH;AACA,4C;AACA,oC;AACA,iB;AACA,oH;AACA,4B;AACA,iB;AACA,0C;AACA,kB;AACA,I;;AAEA,gF;AACA,4B;AACA,iC;AACA,uE;AACA,uE;AACA,+F;AACA,2C;AACA,4B;AACA,iB;AACA,0C;AACA,2C;AACA,kD;AACA,6B;AACA,iB;AACA,2C;AACA,0C;AACA,mD;AACA,mB;AACA,mB;AACA,mB;AACA,I;;AAEA,qG;AACA,uC;;AAEA,iF;AACA,8E;AACA,mF;AACA,4F;AACA,4F;;AAEA,gE;AACA,6D;AACA,6D;AACA,sE;AACA,sE;;AAEA,oE;AACA,iE;AACA,4D;AACA,2D;AACA,wD;AACA,qC;;AAEA,yC;AACA,iB;AACA,iE;AACA,wG;AACA,8D;AACA,sE;AACA,2D;AACA,qC;AACA,mB;AACA,mB;AACA,mB;AACA,mB;AACA,mB;AACA,e;AACA,I;;AAEA,K;;AAEA,W;AACA,sB;AACA,qB;AACA,0C;AACA,uB;AACA,oB;AACA,oB;AACA,0B;AACA,gB;AACA,a;AACA,mB;AACA,6B;AACA,0C;AACA,c;AACA,2B;AACA,oB;AACA,c;AACA,gB","sourcesContent":["Template.__define__(\"test_helpers_00\",Package.handlebars.Handlebars.json_ast_to_func([\"Hi\"]));\nTemplate.__define__(\"test_helpers_10\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"$\",\"Session\",\"get\"],\"test\"]]]));\nTemplate.__define__(\"test_helpers_20\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"$\",\"Session\",\"equals\"],\"test\",\"sdfsdfdsf\"]]]));\nTemplate.__define__(\"test_helpers_21\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"$\",\"Session\",\"equals\"],\"test\",1]]]));\nTemplate.__define__(\"test_helpers_22\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"$\",\"Session\",\"equals\"],\"test\",\"1\"]]]));\nTemplate.__define__(\"test_helpers_23\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"$\",\"Session\",\"equals\"],\"test\",[0,\"'a', 'b', 'c'\"]]]]));\nTemplate.__define__(\"test_helpers_25\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"$\",\"Session\",\"equals\"],\"test\",true]]]));\nTemplate.__define__(\"test_helpers_26\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"$\",\"Session\",\"equals\"],\"test\",false]]]));\nTemplate.__define__(\"test_helpers_27\",Package.handlebars.Handlebars.json_ast_to_func([[\"#\",[[0,\"if\"],[0,\"$\",\"Session\",\"equals\"],\"test\",false],[\"Test is false\"],[\"Test is true\"]]]));\nTemplate.__define__(\"test_helpers_30\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"findOne\"],\"testCollection\",\"{}\"]]]));\nTemplate.__define__(\"test_helpers_31\",Package.handlebars.Handlebars.json_ast_to_func([[\"{\",[[0,\"find\"],\"testCollection\",\"{}\"]]]));\nTemplate.__define__(\"test_helpers_32\",Package.handlebars.Handlebars.json_ast_to_func([[\"#\",[[0,\"with\"],[0,\"findOne\"],\"testCollection\",\"{}\"],[\"ok\"]]]));\nTemplate.__define__(\"test_helpers_33\",Package.handlebars.Handlebars.json_ast_to_func([[\"#\",[[0,\"with\"],[0,\"findOne\"],\"testCollection\",\"{}\"],[[\"{\",[[0,\"a\"]]]]]]));\nTemplate.__define__(\"test_helpers_34\",Package.handlebars.Handlebars.json_ast_to_func([[\"#\",[[0,\"each\"],[0,\"find\"],\"testCollection\",\"{}\"],[[\"{\",[[0,\"a\"]]]],[\"none\"]]]));\n","window.testCollection = new Meteor.Collection('test', { connection: null });\n\n(function () {\n  Tinytest.add('Handlebar helpers - init session templates', function (test) {\n\t  var frag = Meteor.render(Template.test_helpers_00);\n\t  test.equal(canonicalizeHtml(DomUtils.fragmentToHtml(frag)), \"Hi\");\n\t});\n\n\tTinytest.add('Handlebar helpers - init session helpers', function (test) {\n\t  test.notEqual(Handlebars._default_helpers['$'], undefined, '$: Handlebars loaded after session_helpers?');\n\t  test.notEqual(Handlebars._default_helpers['find'], undefined, 'find: Handlebars loaded after session_helpers?');\n\t  test.notEqual(Handlebars._default_helpers['findOne'], undefined, 'findOne: Handlebars loaded after session_helpers?');\n\t});\n\n\tTinytest.add('Handlebar helpers - test {{getSession}}', function (test) {\n\t\tSession.set('test', undefined);\n\t\tvar onscreen = OnscreenDiv(Meteor.render(Template.test_helpers_10));\n\t\ttest.include([\"<!--empty-->\", 'ok'], onscreen.rawHtml(), 'getSession should be empty or set from last session');\n\t\tSession.set('test', 'jlfkjsdfldf');\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), \"jlfkjsdfldf\", 'getSession dont return as expected');\n\t\tSession.set('test', 'ok');\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), \"ok\", 'getSession dont return \"ok\" as expected');\n\t\tonscreen.kill();\n\t});\n\n\tTinytest.add('Handlebar helpers - {{sessionEquals}} String', function (test) {\n\t\t//Template.test_helpers_20\n\t\tSession.set('test', undefined);\n\t\tvar onscreen = OnscreenDiv(Meteor.render(Template.test_helpers_20));\n\t\ttest.equal(onscreen.rawHtml(), 'false');\n\t\tSession.set('test', 'sdfsdfdsf');\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'true');\n\t\tSession.set('test', 'ok');\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'false');\n\t\tonscreen.kill();\n\t});\n\n\tTinytest.add('Handlebar helpers - {{sessionEquals}} Integer', function (test) {\n\t\t//Template.test_helpers_21\n\t\tSession.set('test', undefined);\n\t\tvar onscreen = OnscreenDiv(Meteor.render(Template.test_helpers_21));\n\t\tvar onscreen2 = OnscreenDiv(Meteor.render(Template.test_helpers_22));\n\t\tvar onscreen3 = OnscreenDiv(Meteor.render(Template.test_helpers_20));\n\t\ttest.equal(onscreen.rawHtml(), 'false');\n\t\t\n\t\tSession.set('test', 1);\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'true');\n\t\ttest.equal(onscreen2.rawHtml(), 'false');\n\t\ttest.equal(onscreen3.rawHtml(), 'false');\n\n\t\tSession.set('test', 'ok');\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'false');\n\t\tonscreen.kill();\n\t\tonscreen2.kill();\n\t\tonscreen3.kill();\n\n\t});\n\n\t//XXX: Only string and int can be passed as parametre for helpers?\n\tTinytest.add('Handlebar helpers - {{sessionEquals}} Array', function (test) {\n\t\t//Test of arrays\n\t\t//Template.test_helpers_23\n\t\tSession.set('test', undefined);\n\t\tvar onscreen = OnscreenDiv(Meteor.render(Template.test_helpers_23));\n\t\t//test.equal(onscreen.rawHtml(), 'false');\n\t\tSession.set('test', ['a', 'b', 'c']);\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'true', 'Issue 617, This fails due to lack of support for value input as array');\n\t\tSession.set('test', 'ok');\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'false');\n\t\tonscreen.kill();\n\t});\n\n\t//XXX: Only string and int can be passed as parametre for helpers?\n\tTinytest.add('Handlebar helpers - {{sessionEquals}} Objects', function (test) {\n\t\t//Test of arrays\n\t\t//Template.test_helpers_23\n\t\tSession.set('test', undefined);\n\t\tvar onscreen = OnscreenDiv(Meteor.render(Template.test_helpers_24));\n\t\ttest.notEqual(Template.test_helpers_24, undefined, 'Handlebars does not support objects as input in helpers');\n\t\t//test.equal(onscreen.rawHtml(), 'false');\n\t\tSession.set('test', {foo: 'bar'});\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'true', 'Issue 617, This fails due to lack of support for value input as objects');\n\t\tSession.set('test', 'ok');\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen.rawHtml(), 'false');\n\t\tonscreen.kill();\n\t});\n\n\tTinytest.add('Handlebar helpers - {{sessionEquals}} Boolean', function (test) {\n\t\t//Template.test_helpers_24\n\t\tSession.set('test', undefined);\n\t\tvar onscreen1 = OnscreenDiv(Meteor.render(Template.test_helpers_25));\n\t\tvar onscreen2 = OnscreenDiv(Meteor.render(Template.test_helpers_26));\n\t\tvar onscreen3 = OnscreenDiv(Meteor.render(Template.test_helpers_27)); //Test if sessionEquals\n\t\ttest.equal(onscreen1.rawHtml(), 'false');\n\t\tSession.set('test', true);\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen1.rawHtml(), 'true');\n\t\ttest.equal(onscreen2.rawHtml(), 'false');\n\t\ttest.equal(onscreen3.rawHtml(), 'Test is true');\n\t\tSession.set('test', false);\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen1.rawHtml(), 'false');\n\t\ttest.equal(onscreen2.rawHtml(), 'true');\n\t\ttest.equal(onscreen3.rawHtml(), 'Test is false');\n\t\tonscreen1.kill();\n\t\tonscreen2.kill();\n\t\tonscreen3.kill();\n\t});\n\n\tTinytest.addAsync(\"Handlebar helpers - test {{findOne}} and {{find}}\", function (test, onComplete) {\n\t\ttestCollection.insert({ a: 1, b:2 });\n\n\t\tvar onscreen1 = OnscreenDiv(Meteor.render(Template.test_helpers_30)); //findOne\n\t\tvar onscreen2 = OnscreenDiv(Meteor.render(Template.test_helpers_31)); //find\n\t\tvar onscreen3 = OnscreenDiv(Meteor.render(Template.test_helpers_32)); //with find\n\t\tvar onscreen4 = OnscreenDiv(Meteor.render(Template.test_helpers_33)); //with find return a\n\t\tvar onscreen5 = OnscreenDiv(Meteor.render(Template.test_helpers_34)); //each find return a\n\n\t\ttest.notEqual(Template.test_helpers_30, undefined, 'findOne');\n\t\ttest.notEqual(Template.test_helpers_31, undefined, 'find');\n\t\ttest.notEqual(Template.test_helpers_32, undefined, 'with');\n\t\ttest.notEqual(Template.test_helpers_33, undefined, 'with return a');\n\t\ttest.notEqual(Template.test_helpers_34, undefined, 'each return a');\n\n\t\ttest.equal(onscreen1.rawHtml(), '[object Object]', '{{findOne}}');\n\t\ttest.equal(onscreen2.rawHtml(), '[object Object]', '{{find}}');\n\t\ttest.equal(onscreen3.rawHtml(), 'ok', 'with {{findOne}}');\n\t\ttest.equal(onscreen4.rawHtml(), '1', 'with {{findOne}}');\n\t\ttest.equal(onscreen5.rawHtml(), '1', 'each {{find}}');\n\t\t//console.log(onscreen5.rawHtml());\n\n\t\ttestCollection.remove({}); //Remove all\n\t\tMeteor.flush();\n\t\ttest.equal(onscreen1.rawHtml(), '<!--empty-->', '{{findOne}}');\n\t\ttest.equal(onscreen2.rawHtml(), '[object Object]', '{{find}}'); //Guess this allways returns an object\n\t\t//test.equal(onscreen3.rawHtml(), 'ok', 'with {{findOne}}');\n\t\ttest.equal(onscreen4.rawHtml(), '<!--empty-->', 'with {{findOne}}');\n\t\ttest.equal(onscreen5.rawHtml(), 'none', 'each {{find}}');\n\t\t//console.log(onscreen5.rawHtml());\n\t\tonscreen1.kill();\n\t\tonscreen2.kill();\n\t\tonscreen3.kill();\n\t\tonscreen4.kill();\n\t\tonscreen5.kill();\n\t\tonComplete();\n\t});\n\n}());\n\n//Test API:\n//test.isFalse(v, msg)\n//test.isTrue(v, msg)\n//test.equalactual, expected, message, not\n//test.length(obj, len)\n//test.include(s, v)\n//test.isNaN(v, msg)\n//test.isUndefined(v, msg)\n//test.isNotNull\n//test.isNull\n//test.throws(func)\n//test.instanceOf(obj, klass)\n//test.notEqual(actual, expected, message)\n//test.runId()\n//test.exception(exception)\n//test.expect_fail()\n//test.ok(doc)\n//test.fail(doc)"]}